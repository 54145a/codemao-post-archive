{"id":"7966","user":{"id":"102546","nickname":"Charles","avatar_url":"https://static-platform.codemao.cn/production/avatar/custom/82ead200-e54e-44a6-ac93-1cfaa4935c06","subject_id":0,"work_shop_name":"","work_shop_level":0,"wuhan_medal":false,"has_signed":false},"title":"[讨论]c++大佬路过，noip1等奖","content":"<p><p>#include&lt;cstdio&gt; #include&lt;cstdlib&gt; #include&lt;cmath&gt; #include&lt;cstring&gt; #include&lt;ctime&gt; #include&lt;algorithm&gt; #include&lt;vector&gt; #include&lt;queue&gt; #define ll long long #define inf 1&lt;&lt;30 ll read() { ll tmp=0; char c=getchar(),f=1; while(c&lt;'0'||'9'&lt;c){if(c=='-')f=-1; c=\"getchar();}\" while('0'&lt;=\"c&amp;&amp;c&lt;='9'){tmp=tmp*10+c-'0';\" return=\"\" tmp*f;=\"\" }=\"\" using=\"\" namespace=\"\" std;=\"\" int=\"\" fir[1010]=\"{0},ne[1000010],to[1000010],w[1000010];\" vis[1010],dist[1010];=\"\" q[3000010];=\"\" x[1010],y[1010],col[1010];=\"\" n,m,tot=\"0;\" void=\"\" add(int=\"\" x,int=\"\" y,int=\"\" z){to[++tot]=\"y;\" w[tot]=\"z;\" ne[tot]=\"fir[x];\" fir[x]=\"tot;}\" find(int=\"\" xx,int=\"\" yy)=\"\" {=\"\" for(int=\"\" i=\"1;i&lt;=n;i++)if(x[i]==xx&amp;&amp;y[i]==yy)return\" i;=\"\" 0;=\"\" spfa(int=\"\" s)=\"\" for(i=\"1;i&lt;=n;i++)dist[i]=inf,vis[i]=0;\" h=\"1,t=1;\" q[1]=\"s;\" dist[s]=\"0;\" vis[s]=\"1;\" while(h&lt;=\"t){\" if(dist[to[i]]=\"\"&gt;dist[q[h]]+w[i]){ dist[to[i]]=dist[q[h]]+w[i]; if(!vis[to[i]]){ q[++t]=to[i]; vis[to[i]]=1; } } vis[q[h++]]=0; } //for(i=1;i&lt;=n;i++)printf(\"%d \",dist[i]); printf(\"\\n\"); } int main() { int i,j; freopen(\"chess.in\",\"r\",stdin); freopen(\"chess.out\",\"w\",stdout); m=read(); n=read(); for(i=1;i&lt;=n;i++)x[i]=read(),y[i]=read(),col[i]=read(); for(i=1;i&lt;=n;i++) for(j=1;j&lt;=n;j++){ int dist=abs(x[i]-x[j])+abs(y[i]-y[j]); if(dist==1){ if(col[i]==col[j])add(i,j,0);else add(i,j,1); } else if(dist==2){ if(col[i]==col[j])add(i,j,2);else add(i,j,3); } } spfa(find(1,1)); int ans=inf; if(find(m,m))ans=dist[find(m,m)]; else{ if(find(m,m-1))ans=min(ans,dist[find(m,m-1)]+2); if(find(m-1,m))ans=min(ans,dist[find(m-1,m)]+2); } if(ans&lt;inf)printf(\"%d\\n\",ans);else printf(\"-1\\n\");=\"\" fclose(stdin);=\"\" fclose(stdout);=\"\" return=\"\" 0;=\"\" }&lt;=\"\" p=\"\"&gt;&lt;/inf)printf(\"%d\\n\",ans);else&gt;&lt;/c){if(c=='-')f=-1;&gt;&lt;/queue&gt;&lt;/vector&gt;&lt;/algorithm&gt;&lt;/ctime&gt;&lt;/cstring&gt;&lt;/cmath&gt;&lt;/cstdlib&gt;&lt;/cstdio&gt;</p>\n<p><br></p></p>","board_id":"7","board_name":"灌水池塘","updated_at":1516097381,"created_at":1512395374,"n_views":114,"n_replies":7,"n_comments":0,"is_authorized":false,"is_featured":false,"is_hotted":false,"is_pinned":false,"tutorial_flag":0,"ask_help_flag":0}